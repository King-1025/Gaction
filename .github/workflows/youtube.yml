name: YouTube视频下载

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest
    strategy:
      max-parallel: 4
      matrix:
        python-version: [3.7]

    steps:
    - uses: actions/checkout@v1
    - name: 配置 Python ${{ matrix.python-version }}
      uses: actions/setup-python@v1
      with:
        python-version: ${{ matrix.python-version }}

        #    - name: 配置缓存依赖
        #uses: actions/cache@v1
        #with:
        #path: ~/.cache/pip
        #key: ${{ runner.os }}-pip-${{ hashFiles('**/requirements.txt') }}
        #restore-keys: |
        #    ${{ runner.os }}-pip-

    - name: 安装依赖
      run: pip install requests 
    - name: 列出依赖
      run: pip list
    - name: 获取视频
      run: ./downloader
    - name: 云盘上传
      run: ./uploader

      #    - name: 下载视频
      #uses: actions/upload-artifact@v1
      #with:
      #  name: video
      #  path: video
